<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="Groovy VFS : A DSL for Groovy on top of Apache VFS2">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Groovy VFS</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/ysb33r/groovy-vfs">View on GitHub</a>

          <h1 id="project_title">Groovy VFS</h1>
          <h2 id="project_tagline">A DSL for Groovy on top of Apache VFS2</h2>
<!--
            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/ysb33r/groovy-vfs/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/ysb33r/groovy-vfs/tarball/master">Download this project as a tar.gz file</a>
            </section>
-->
            <a href="api/api.html">API Documentation</a>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>
<a id="groovy-vfs" class="anchor" href="#groovy-vfs" aria-hidden="true"><span class="octicon octicon-link"></span></a>Groovy VFS</h1>

<p>A DSL for Groovy to wrap around the Apache VFS libraries.</p>

<p>If you like it, then tweet about it using <code>#groovyvfs</code> as the hashtag.</p>

<h2>
<a id="groovy-library" class="anchor" href="#groovy-library" aria-hidden="true"><span class="octicon octicon-link"></span></a>Groovy Library</h2>

<p><a href="https://bintray.com/ysb33r/grysb33r/groovy-vfs/_latestVersion"> <img src="https://api.bintray.com/packages/ysb33r/grysb33r/groovy-vfs/images/download.png" alt="Download"> </a></p>

<div class="highlight highlight-groovy"><pre>
<span class="pl-st">@Grapes</span>([
    <span class="pl-st">@Grab</span>( <span class="pl-s1"><span class="pl-pds">'</span>org.ysb33r.groovy:groovy-vfs:0.5<span class="pl-pds">'</span></span> ),
    <span class="pl-st">@Grab</span>( <span class="pl-s1"><span class="pl-pds">'</span>commons-net:commons-net:3.+<span class="pl-pds">'</span></span> ), <span class="pl-c">// If you want to use ftp </span>
    <span class="pl-st">@Grab</span>( <span class="pl-s1"><span class="pl-pds">'</span>commons-httpclient:commons-httpclient:3.1<span class="pl-pds">'</span></span>), <span class="pl-c">// If you want http/https</span>
    <span class="pl-st">@Grab</span>( <span class="pl-s1"><span class="pl-pds">'</span>com.jcraft:jsch:0.1.48<span class="pl-pds">'</span></span> ) <span class="pl-c">// If you want sftp</span>
])
<span class="pl-k">import</span> <span class="pl-smi">org.ysb33r.groovy.dsl.vfs.VFS</span>

<span class="pl-st">def</span> vfs <span class="pl-k">=</span> <span class="pl-k">new</span> VFS()

<span class="pl-c">// Simple copy operation</span>
vfs<span class="pl-k">.</span>cp <span class="pl-s1"><span class="pl-pds">'</span>ftp://foo.example/myfile<span class="pl-pds">'</span></span>, <span class="pl-s1"><span class="pl-pds">'</span>sftp://bar.example/yourfile<span class="pl-pds">'</span></span>

<span class="pl-c">// Utilising the DSL</span>
vfs {

    <span class="pl-c">// Copy file from one site to anther using two different protocols</span>
    cp <span class="pl-s1"><span class="pl-pds">'</span>http://first.example/myfile<span class="pl-pds">'</span></span>, <span class="pl-s1"><span class="pl-pds">'</span>sftp://second.example/yourfile<span class="pl-pds">'</span></span>

    <span class="pl-c">// Not implemented yet - move file between two sites using different protocols</span>
    mv <span class="pl-s1"><span class="pl-pds">'</span>sftp://second.example/yourfile<span class="pl-pds">'</span></span>, <span class="pl-s1"><span class="pl-pds">'</span>ftp://third.example/theirfile<span class="pl-pds">'</span></span>

    <span class="pl-c">// Lists all files on a remote site</span>
    ls (<span class="pl-s1"><span class="pl-pds">'</span>http://first.example<span class="pl-pds">'</span></span>) {
        <span class="pl-s3">println</span> it<span class="pl-k">.</span>name
    }

    <span class="pl-c">// Streams the output</span>
    cat (<span class="pl-s1"><span class="pl-pds">'</span>http://first.example/myfile<span class="pl-pds">'</span></span>) { <span class="pl-v">strm</span><span class="pl-k">-&gt;</span>
        <span class="pl-s3">println</span> strm<span class="pl-k">.</span>text
    }

    <span class="pl-c">// Create a new folder on a remote site</span>
    mkdir <span class="pl-s1"><span class="pl-pds">'</span>sftp://second.example/my/new/folder<span class="pl-pds">'</span></span>

    <span class="pl-c">// Change default options via property Map</span>
    options <span class="pl-s1"><span class="pl-pds">'</span>vfs.ftp.passiveMode<span class="pl-pds">'</span></span> : <span class="pl-c1">true</span>

    <span class="pl-c">// Change default options DSL style</span>
    options {
        ftp {
            passiveMode <span class="pl-c1">true</span>
        }
    }

    <span class="pl-c">// Use options on a per URL basis</span>
    cp <span class="pl-s1"><span class="pl-pds">'</span>ftp://first.example/myfile?vfs.ftp.passiveMode=1<span class="pl-pds">'</span></span>, <span class="pl-s1"><span class="pl-pds">'</span>sftp://second.example/yourfile?vfs.sftp.compression=zlib<span class="pl-pds">'</span></span>

    <span class="pl-c">// Download a compressed archive and unpack to local directory</span>
    cp <span class="pl-s1"><span class="pl-pds">'</span>tbz2:ftp:/first.example/myFiles.tar.bz2", new File( <span class="pl-pds">'</span></span><span class="pl-k">..</span><span class="pl-k">/</span>unpack<span class="pl-k">-</span>here<span class="pl-s1"><span class="pl-pds">'</span> ), recursive:true</span>
<span class="pl-s1"></span>
<span class="pl-s1">}</span></pre></div>

<h2>
<a id="gradle-plugin" class="anchor" href="#gradle-plugin" aria-hidden="true"><span class="octicon octicon-link"></span></a>Gradle plugin</h2>

<p><a href="https://bintray.com/ysb33r/grysb33r/vfs-gradle-plugin/_latestVersion"> <img src="https://api.bintray.com/packages/ysb33r/grysb33r/vfs-gradle-plugin/images/download.png" alt="Download"> </a></p>

<p>It is now possible to use this in Gradle as an extension to the project class.
The interface is very experimental and may change without much warning in future
releases of this plugin.</p>

<div class="highlight highlight-groovy"><pre>
buildscript {
    repositories {
        jcenter()
        mavenCentral()
      }
      dependencies {
        classpath <span class="pl-s1"><span class="pl-pds">'</span>org.ysb33r.gradle:vfs-gradle-plugin:0.5.1<span class="pl-pds">'</span></span>
        classpath <span class="pl-s1"><span class="pl-pds">'</span>commons-net:commons-net:3.+<span class="pl-pds">'</span></span>  <span class="pl-c">// If you want to use ftp </span>
        classpath <span class="pl-s1"><span class="pl-pds">'</span>commons-httpclient:commons-httpclient:3.1<span class="pl-pds">'</span></span> <span class="pl-c">// If you want http/https</span>
        classpath <span class="pl-s1"><span class="pl-pds">'</span>com.jcraft:jsch:0.1.48<span class="pl-pds">'</span></span>  <span class="pl-c">// If you want sftp</span>
      }
}
apply <span class="pl-c1">plugin</span> : <span class="pl-s1"><span class="pl-pds">'</span>org.ysb33r.vfs<span class="pl-pds">'</span></span>

<span class="pl-c">// Create a VFS task</span>
task copyReadme <span class="pl-k">&lt;&lt;</span> { 
  vfs {
    cp <span class="pl-s1"><span class="pl-pds">'</span>https://raw.github.com/ysb33r/groovy-vfs/master/README.md<span class="pl-pds">'</span></span>, <span class="pl-k">new</span> <span class="pl-st">File</span>(<span class="pl-s1"><span class="pl-pds">"</span><span class="pl-s2"><span class="pl-pse">${</span>buildDir<span class="pl-pse">}</span></span>/tmp/README.md<span class="pl-pds">"</span></span>)
  }
}

<span class="pl-c">// it is also possible to update global options for vfs</span>
vfs {
  options {
    http {
      maxTotalConnections <span class="pl-c1">4</span>
    }
  }
}</pre></div>

<p>If you want to see what VFS is going run gradle with <code>--debug</code></p>

<h2>
<a id="adding-extra-plugins" class="anchor" href="#adding-extra-plugins" aria-hidden="true"><span class="octicon octicon-link"></span></a>Adding extra plugins</h2>

<p>From v1.0 onwards additional plugins can be loaded via a new <code>extend</code> block. For more details see this gist:
<a href="https://gist.github.com/ysb33r/9916940">https://gist.github.com/ysb33r/9916940</a></p>

<h2>
<a id="smb-provider" class="anchor" href="#smb-provider" aria-hidden="true"><span class="octicon octicon-link"></span></a>SMB provider</h2>

<p><a href="https://bintray.com/ysb33r/grysb33r/groovy-vfs-smb-provider/_latestVersion"> <img src="https://api.bintray.com/packages/ysb33r/grysb33r/groovy-vfs-smb-provider/images/download.png" alt="Download"> </a></p>

<p>A provider for accessing SMB shares is now avavilable. The plugin must be loaded separately.</p>

<div class="highlight highlight-groovy"><pre><span class="pl-st">@Grab</span>( <span class="pl-s1"><span class="pl-pds">'</span>org.ysb33r.groovy:groovy-vfs-smb-provider:1.0-beta1<span class="pl-pds">'</span></span> ),
<span class="pl-st">@Grab</span>( <span class="pl-s1"><span class="pl-pds">'</span>jcifs:jcifs:1.3.17<span class="pl-pds">'</span></span> ),

vfs {
  extend {
    provider <span class="pl-c1">className</span>: <span class="pl-s1"><span class="pl-pds">'</span>org.ysb33r.groovy.vfsplugin.smb.SmbFileProvider<span class="pl-pds">'</span></span>, <span class="pl-c1">schemes</span>: [<span class="pl-s1"><span class="pl-pds">'</span>smb<span class="pl-pds">'</span></span>,<span class="pl-s1"><span class="pl-pds">'</span>cifs<span class="pl-pds">'</span></span>]
  }

  cp <span class="pl-s1"><span class="pl-pds">'</span>smb://someserver/share/dir/file<span class="pl-pds">'</span></span>, <span class="pl-k">new</span> <span class="pl-st">File</span>(<span class="pl-s1"><span class="pl-pds">'</span>localfile.txt)</span>
<span class="pl-s1">}</span></pre></div>

<p><em>NOTE:</em> when embedding windows credentials in the URL use <code>%5C</code> in place of backslash i.e.</p>

<pre><code>  smb://DOMAIN%5cUSERNAME:PASSWORD@HOSTNAME/SHARE/PATH
</code></pre>

<h2>
<a id="s3-provider-experimental" class="anchor" href="#s3-provider-experimental" aria-hidden="true"><span class="octicon octicon-link"></span></a>S3 provider (EXPERIMENTAL)</h2>

<p><a href="https://bintray.com/ysb33r/grysb33r/groovy-vfs-cloud-core/_latestVersion"> <img src="https://api.bintray.com/packages/ysb33r/grysb33r/groovy-vfs-cloud-core/images/download.png" alt="Download"> </a></p>

<p>A provider for accessing S3 shares is now available and will be fully supported in future version. The plugin
must be loaded separately.</p>

<div class="highlight highlight-groovy"><pre><span class="pl-st">@Grab</span>( <span class="pl-s1"><span class="pl-pds">'</span>org.ysb33r.groovy:groovy-vfs-cloud-core:0.1-beta1<span class="pl-pds">'</span></span> ),
<span class="pl-st">@Grab</span>( <span class="pl-s1"><span class="pl-pds">'</span>org.apache.jclouds:jclouds-all:1.7.2<span class="pl-pds">'</span></span> )
<span class="pl-st">@Grab</span>( <span class="pl-s1"><span class="pl-pds">'</span>org.apache.jclouds.driver:jclouds-jsch:1.7.2<span class="pl-pds">'</span></span> )
<span class="pl-st">@Grab</span>( <span class="pl-s1"><span class="pl-pds">'</span>org.apache.jclouds.provider:aws-s3:1.7.2<span class="pl-pds">'</span></span>
vfs {
  extend {
    provider className: <span class="pl-s1"><span class="pl-pds">'</span>org.ysb33r.groovy.vfsplugin.cloud.s3.S3FileProvider<span class="pl-pds">'</span></span>, schemes: [<span class="pl-s1"><span class="pl-pds">'</span>s3<span class="pl-pds">'</span></span>]
  }

  cp <span class="pl-s1"><span class="pl-pds">'</span>smb://id:key@bucket/dir/file<span class="pl-pds">'</span></span>, new <span class="pl-st">File</span>(<span class="pl-s1"><span class="pl-pds">'</span>localfile.txt)</span>
<span class="pl-s1">}</span></pre></div>

<p><em>NOTE:</em> Although S# does not actually support folders, this is simulated trhough the use of folder names containing <code>/</code>
characters.</p>

<h2>
<a id="command-line-utility" class="anchor" href="#command-line-utility" aria-hidden="true"><span class="octicon octicon-link"></span></a>Command-line utility</h2>

<p><a href="https://bintray.com/ysb33r/nanook/vfs/_latestVersion"> <img src="https://api.bintray.com/packages/ysb33r/nanook/vfs/images/download.png" alt="Download"> </a></p>

<p>A command-line utility mimicking a number of GNU shell utilities is available.</p>

<h2>
<a id="documentation" class="anchor" href="#documentation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Documentation</h2>

<ul>
<li>See <a href="https://github.com/ysb33r/groovy-vfs/wiki">https://github.com/ysb33r/groovy-vfs/wiki</a> for more detailed documentation.</li>
<li>Greach2014 presentation on v0.5 - <a href="http://www.slideshare.net/ysb33r/groovy-vfs-32889561">http://www.slideshare.net/ysb33r/groovy-vfs-32889561</a>
</li>
</ul>

<h2>
<a id="credits" class="anchor" href="#credits" aria-hidden="true"><span class="octicon octicon-link"></span></a>Credits</h2>

<p>It is seldom that these kind of libraries happen in isolation. It is therefore prudent 
that I acknowledge the inputs of others in the creation of groovy-vfs</p>

<ul>
<li>Luke Daley (<a href="https://gist.github.com/alkemist/7943781">https://gist.github.com/alkemist/7943781</a>) for helping to use Ratpack as a Mock HTTP Server in unit tests.</li>
<li>Will_lp (<a href="https://gist.github.com/will-lp/5785180">https://gist.github.com/will-lp/5785180</a>) &amp; Jim White (<a href="https://gist.github.com/jimwhite/5784982">https://gist.github.com/jimwhite/5784982</a>) 
offered great suggestions when I got stuck with the config DSL.</li>
<li>Jez Higgins, Rob Fletcher, Giovanni Asproni, Balachandran Sivakumar, Burkhard Kloss &amp; Tim Barker who helped shape the
design decision to auto-create intermediates during a move operation.</li>
<li>Maarten Boekhold for testing the SMB Provider plugin</li>
<li>Everyone from Greach 2014 that provided feedback</li>
</ul>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Groovy-vfs maintained by <a href="https://github.com/ysb33r">Schalk W. Cronjé</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
